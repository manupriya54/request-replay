---
- request:
    method: POST
    url: /v1/charges
    headers:
      Accept: "*/*; q=0.5, application/xml"
      Accept-Encoding: gzip, deflate
      User-Agent: Stripe/v1 RubyBindings/1.23.0
      Authorization: Bearer sk_test_xOEwT736mUYLIx7hs0xTiCkI
      Content-Type: application/x-www-form-urlencoded
      X-Stripe-Client-User-Agent: '{"bindings_version":"1.23.0","lang":"ruby","lang_version":"2.1.2 p95 (2014-05-08)","platform":"x86_64-linux","engine":"ruby","publisher":"stripe","uname":"Linux version 3.13.0-57-generic (buildd@brownie) (gcc version 4.8.2 (Ubuntu 4.8.2-19ubuntu1) ) #95-Ubuntu SMP Fri Jun 19 09:28:15 UTC 2015","hostname":"caron"}'
      Host: api.stripe.com
    body: "amount=123&currency=usd&card[number]=4242424242424242&card[exp_month]=12&card[exp_year]=2020"
  response:
    code: 200
    headers:
      Server: nginx
      Date: Mon, 27 Jul 2015 05:11:40 GMT
      Content-Type: application/json
      Content-Length: '1422'
      Connection: keep-alive
      Access-Control-Allow-Credentials: 'true'
      Access-Control-Allow-Methods: GET, POST, HEAD, OPTIONS, DELETE
      Access-Control-Allow-Origin: "*"
      Cache-Control: no-cache, no-store
      Request-Id: req_6gQly7HiMYbIEC
      Stripe-Version: '2015-07-13'
      Strict-Transport-Security: max-age=31556926; includeSubDomains
    body: |
      {
        "id": "ch_16T3toKv5xscqGyh90sf8TSa",
        "object": "charge",
        "created": 1437973900,
        "livemode": false,
        "paid": true,
        "status": "succeeded",
        "amount": 123,
        "currency": "usd",
        "refunded": false,
        "source": {
          "id": "card_16T3toKv5xscqGyh4LZ6rPyz",
          "object": "card",
          "last4": "4242",
          "brand": "Visa",
          "funding": "credit",
          "exp_month": 12,
          "exp_year": 2020,
          "fingerprint": "70RrlzfthHpu3e4l",
          "country": "US",
          "name": null,
          "address_line1": null,
          "address_line2": null,
          "address_city": null,
          "address_state": null,
          "address_zip": null,
          "address_country": null,
          "cvc_check": null,
          "address_line1_check": null,
          "address_zip_check": null,
          "tokenization_method": null,
          "dynamic_last4": null,
          "metadata": {},
          "customer": null
        },
        "captured": true,
        "balance_transaction": "txn_16T3toKv5xscqGyhqAKF6jOq",
        "failure_message": null,
        "failure_code": null,
        "amount_refunded": 0,
        "customer": null,
        "invoice": null,
        "description": null,
        "dispute": null,
        "metadata": {},
        "statement_descriptor": null,
        "fraud_details": {},
        "receipt_email": null,
        "receipt_number": null,
        "shipping": null,
        "destination": null,
        "application_fee": null,
        "refunds": {
          "object": "list",
          "total_count": 0,
          "has_more": false,
          "url": "/v1/charges/ch_16T3toKv5xscqGyh90sf8TSa/refunds",
          "data": []
        }
      }
- request:
    method: POST
    url: /v1/charges
    headers:
      Accept: "*/*; q=0.5, application/xml"
      Accept-Encoding: gzip, deflate
      User-Agent: Stripe/v1 RubyBindings/1.23.0
      Authorization: Bearer sk_test_xOEwT736mUYLIx7hs0xTiCkI
      Content-Type: application/x-www-form-urlencoded
      X-Stripe-Client-User-Agent: '{"bindings_version":"1.23.0","lang":"ruby","lang_version":"2.1.2 p95 (2014-05-08)","platform":"x86_64-linux","engine":"ruby","publisher":"stripe","uname":"Linux version 3.13.0-57-generic (buildd@brownie) (gcc version 4.8.2 (Ubuntu 4.8.2-19ubuntu1) ) #95-Ubuntu SMP Fri Jun 19 09:28:15 UTC 2015","hostname":"caron"}'
      Host: api.stripe.com
    body: "amount=123&currency=usd&card[number]=4242424242424242&card[exp_month]=12&card[exp_year]=2020&card[address_line1]=3180+18th+St&card[address_zip]=94110"
  response:
    code: 200
    headers:
      Server: nginx
      Date: Mon, 27 Jul 2015 05:46:48 GMT
      Content-Type: application/json
      Content-Length: '1439'
      Connection: keep-alive
      Access-Control-Allow-Credentials: 'true'
      Access-Control-Allow-Methods: GET, POST, HEAD, OPTIONS, DELETE
      Access-Control-Allow-Origin: "*"
      Access-Control-Max-Age: 300
      Cache-Control: no-cache, no-store
      Request-Id: req_6gRKkuyOC7S0QT
      Stripe-Version: '2015-07-13'
      Strict-Transport-Security: max-age=31556926; includeSubDomains
    body: |
      {
        "id": "ch_16T4RoKv5xscqGyhKvytKEuG",
        "object": "charge",
        "created": 1437976008,
        "livemode": false,
        "paid": true,
        "status": "succeeded",
        "amount": 123,
        "currency": "usd",
        "refunded": false,
        "source": {
          "id": "card_16T4RoKv5xscqGyhav15111M",
          "object": "card",
          "last4": "4242",
          "brand": "Visa",
          "funding": "credit",
          "exp_month": 12,
          "exp_year": 2020,
          "fingerprint": "70RrlzfthHpu3e4l",
          "country": "US",
          "name": null,
          "address_line1": "3180 18th St",
          "address_line2": null,
          "address_city": null,
          "address_state": null,
          "address_zip": "94110",
          "address_country": null,
          "cvc_check": null,
          "address_line1_check": "pass",
          "address_zip_check": "pass",
          "tokenization_method": null,
          "dynamic_last4": null,
          "metadata": {},
          "customer": null
        },
        "captured": true,
        "balance_transaction": "txn_16T4RoKv5xscqGyhUtgdxIrD",
        "failure_message": null,
        "failure_code": null,
        "amount_refunded": 0,
        "customer": null,
        "invoice": null,
        "description": null,
        "dispute": null,
        "metadata": {},
        "statement_descriptor": null,
        "fraud_details": {},
        "receipt_email": null,
        "receipt_number": null,
        "shipping": null,
        "destination": null,
        "application_fee": null,
        "refunds": {
          "object": "list",
          "total_count": 0,
          "has_more": false,
          "url": "/v1/charges/ch_16T4RoKv5xscqGyhKvytKEuG/refunds",
          "data": []
        }
      }
- request:
    method: POST
    url: /v1/charges
    headers:
      Accept: "*/*; q=0.5, application/xml"
      Accept-Encoding: gzip, deflate
      User-Agent: Stripe/v1 RubyBindings/1.23.0
      Authorization: Bearer sk_test_xOEwT736mUYLIx7hs0xTiCkI
      Content-Type: application/x-www-form-urlencoded
      X-Stripe-Client-User-Agent: '{"bindings_version":"1.23.0","lang":"ruby","lang_version":"2.1.2 p95 (2014-05-08)","platform":"x86_64-linux","engine":"ruby","publisher":"stripe","uname":"Linux version 3.13.0-57-generic (buildd@brownie) (gcc version 4.8.2 (Ubuntu 4.8.2-19ubuntu1) ) #95-Ubuntu SMP Fri Jun 19 09:28:15 UTC 2015","hostname":"caron"}'
      Host: api.stripe.com
    body: "amount=123&currency=usd&card[number]=400000000001&card[exp_month]=12&card[exp_year]=2020"
  response:
    code: 402
    headers:
      Server: nginx
      Date: Mon, 27 Jul 2015 05:48:38 GMT
      Content-Type: application/json
      Content-Length: '150'
      Connection: keep-alive
      Access-Control-Allow-Credentials: 'true'
      Access-Control-Allow-Methods: GET, POST, HEAD, OPTIONS, DELETE
      Access-Control-Allow-Origin: "*"
      Access-Control-Max-Age: 300
      Cache-Control: no-cache, no-store
      Request-Id: req_6gRMcdYR9J3dfH
      Stripe-Version: 2015-07-13
    body: |
      {
        "error": {
          "message": "Your card number is incorrect.",
          "type": "card_error",
          "param": "number",
          "code": "incorrect_number"
        }
      }
